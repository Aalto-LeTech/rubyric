<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
  <title>Rubyric
    <%= "- #{@exercise.name}" if @exercise && !@exercise.new_record? %>
  </title>
  <%= csrf_meta_tag %>
  <%= stylesheet_link_tag "application", :media => "all" %>
  <%= javascript_include_tag "application" %>
  <%= yield(:javascript) %>
</head>

<body>

<%= render :template => 'layouts/top' %>

<div class="container-fluid">
  <div class="row-fluid">
    <!-- Left navigation -->
    <div class="span2 leftnavicolumn">
      <% if @course and !@course.new_record? %>
        <ul class="nav nav-list">
          <li class="nav-header">Course</li>
          <li><%= link_to @course.name, course_path(@course) %></li>
          <% if @is_teacher || is_admin?(current_user) %>
            <li><%= link_to edit_course_path(@course) do %><i class="icon-wrench"></i> Settings<% end %></li>
          <% end %>


          <% if @course_instance and !@course_instance.new_record? %>
            <!-- Selected instance -->
            <li class="nav-header">Instance</li>
            <li><%= link_to @course_instance.name, course_instance_path(@course_instance) %></li>
            <% if @is_teacher || is_admin?(current_user) %>
              <li><%= link_to edit_course_instance_path(@course_instance) do %><i class="icon-wrench"></i> Settings<% end %></li>
            <% end %>

            <% if @exercise and !@exercise.new_record?%>
              <!-- Selected exercise -->
              <li class="nav-header">Exercise</li>
              <li><%= link_to @exercise.name, exercise_path(@exercise) %></li>
              <% if @is_teacher || is_admin?(current_user) %>
                <li><%= link_to edit_exercise_path(@exercise) do %><i class="icon-wrench"></i> Settings<% end %></li>
                <li><%= link_to edit_exercise_rubric_path(@exercise) do %><i class="icon-th-list"></i> Rubric<% end %></li>
                <!--li><%= link_to exercise_path(@exercise) do %><i class="icon-folder-open"></i> Submissions<% end %></li-->
                <!--li><%= link_to exercise_statistics_path(@exercise) do %><i class="icon-tasks"></i> Statistics<% end %></li-->
                <!--li><%= link_to exercise_results_path(@exercise) do %><i class="icon-list-alt"></i> Results<% end %></li-->
              <% end %>
            <% else %>
              <!-- List of exercises-->
              <li class="nav-header">Exercises</li>
              <% @course_instance.exercises.each do |exercise| %>
                <li><%= link_to exercise.name, exercise_path(exercise) %></li>
              <% end %>
            <% end %>
          <% else %>
            <!-- List of instances -->
            <li class="nav-header">Instances</li>
            <% @course.course_instances.each do |instance| %>
              <ul>
                <li><%= link_to instance.name, course_instance_path(instance) %></li>
              </ul>
            <% end %>
          <% end %>

        </ul>
      <% end %>

    </div> <!-- / left column -->

    <!-- Content -->
    <div class="span8">
      <!-- Flash messages -->
      <% if flash[:warning] %>
        <div class="alert"><%= flash[:warning] %></div>
      <% end %>

      <% if flash[:success] %>
        <div class="alert alert-success"><%= flash[:success] %></div>
      <% end %>

      <% if flash[:error] %>
        <div class="alert alert-error"><%= flash[:error] %></div>
      <% end %>

      <%= yield  %>
    </div>

    <div class="span2 helpcolumn">
    </div>
  </div>
</div>

</body>
</html>
