<!-- exercises/submissions.html.erb -->
<% content_for :javascript do %>
  <%= javascript_include_tag 'submissions' %>
<% end %>

<div class="page-header">
  <h1>
    <%= "#{@course.code} #{@course.name}" %> -
    <%= "#{@course_instance.name}" %> -
    <%= @exercise.name %>
  </h1>
</div>

<p><strong>Submit url: </strong><%= link_to submit_url(@exercise.id), submit_url(@exercise.id) %> <span class="hint">- Publish this link on the homepage of the course.</span></p>

<p>
  <b>Deadline:</b>
  <% if @exercise.deadline.blank? %>
    <%= link_to 'No deadline set', edit_exercise_path(@exercise), :class => 'warning' %>
  <% else %>
    <%=l @exercise.deadline %>
  <% end %>
</p>

<h2>Submissions</h2>

  <p>Groups: <%= @groups.size %></p>

  <table class="assignments">
    <thead>
      <tr>
        <td>Submission</td>
        <td>Review</td>
        <td>Status</td>
        <td>Grade</td>
      </tr>
    </thead>
    <tbody id="submissions_table">
      <%= render :partial => 'group', :collection => @groups %>
    </tbody>
    <tfoot>
      <tr>
        <td>
          <button id="submissions-select-all" onClick="return false;" title="Selects all submissions">Select all</button>
          <button id="submissions-select-latest" onClick="return false;" title="Selects the latest submission from each group">Select latest</button>
          <button id="submissions-select-none" onClick="return false;">Select none</button>
        </td>
        <td>
          <button id="reviews-select-all" onClick="return false;">Select all</button>
          <button id="reviews-select-finished" onClick="return false;">Select finished</button>
          <button id="reviews-select-none" onClick="return false;">Select none</button>
        </td>
        <td></td>
        <td></td>
      </tr>

      <tr class="spacer">
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>

      <tr>
        <td>
        </td>
        <td>
          <p><%= submit_tag 'Mail selected reviews', :name => 'mail' %></p>
          <p><%= submit_tag 'Delete selected reviews...', :name => 'delete' %></p>
        </td>
        <td></td>
        <td></td>
      </tr>
    </tfoot>
  </table>

  <p>
    <% #= submit_to_remote('remove_button', 'Delete selected', :url => {:action => 'remove_selected_submissions'}, :update =>  'submissions_table', :confirm => 'Are you sure you want to delete?', :html => {:action => 'remove_selected_submissions', :class => 'trash'})
    %>

    <% #= submit_to_remote('send_button', 'Mail selected', :url => {:action => 'send_selected_reviews'}, :update =>  'submissions_table', :confirm => 'Feedback mails will be sent to the students.', :html => {:action => 'send_selected_reviews', :title => 'Emails selected reviews to the students'})
    %>
  </p>



<!--p><%= link_to 'Download archive', exercise_archive_path(@exercise) %></p-->

